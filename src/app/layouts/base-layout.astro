---
import "~/app/styles/global.css";
import Footer from "~/sections/footer/Footer.astro";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Ja és nadal a Frèsia</title>
	</head>
	<body
		><header
			class="flex gap-4 items-center justify-between p-4 pb-2 sticky top-0 backdrop-blur-md z-10"
		>
			<strong class="text-lg z-20">Frèsia</strong>
			<nav class="flex gap-4 items-center z-20">
				<a href="#find-us" class="hover:underline">Troban's</a>
				<a
					href="https://www.fresiamataro.com/"
					class="hover:underline"
					target="_blank"
					rel="noopener noreferrer">Botiga online</a
				>
			</nav>
			<div
				class="inset-0 w-full h-full absolute bg-linear-180 from-background/80"
			>
			</div>
		</header>
		<div id="smooth-wrapper">
			<div id="smooth-content" class="relative min-h-screen">
				<!--  -->
				<main class="flex flex-col gap-32">
					<div
						id="preloader"
						class="absolute inset-0 w-full h-screen bg-linear-180 from-background to-red-50 pointer-events-none"
					>
					</div>

					<slot />
				</main>
				<!--  -->
				<Footer />
			</div>
		</div>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>

<script>
	import { gsap } from "gsap";
	import ScrollSmoother from "gsap/ScrollSmoother";
	import ScrollTrigger from "gsap/ScrollTrigger";
	gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

	function animateHeading() {
		ScrollSmoother.create({
			smooth: 1,
			wrapper: "#smooth-wrapper",
			content: "#smooth-content",
			effects: true,
			smoothTouch: 0.1,
		});
	}

	animateHeading();

	function hidePreloader() {
		const preloader = document.getElementById("preloader") as HTMLElement;
		gsap.to(preloader, {
			autoAlpha: 0,
			duration: 1,
			delay: 0.5,
			onComplete: () => {
				preloader.style.display = "none";
			},
		});
	}

	window.addEventListener("load", () => {
		hidePreloader();
	});
</script>
